## Трекер задач сотрудников

### Развёртывание на сервере (Docker)
Проект развёртывается на удалённом сервере под управлением Ubuntu 24.04 с использованием Docker и Docker Compose.

#### 1. Подготовка сервера

Установка Docker и Docker Compose:
```
sudo apt update
sudo apt install docker.io docker-compose-plugin -y
```
Проверка версий:
```
docker --version
docker compose version
```

#### 2. Клонирование проекта

Проект клонируется в директорию пользователя из ветки `develop` (т.к. сдаю на проверку PR):
```
git clone -b develop https://github.com/<username>/ServiceTracker.git
cd ServiceTracker
```
#### 3. Переменные окружения
В корне проекта создаётся файл `.env` (не добавляется в репозиторий).

Создание файла:
```
cp .env.example .env
```
Пример структуры в `.env.example`

#### 4. Сборка и запуск контейнеров

Запуск проекта выполняется одной командой:
```
docker compose up --build
```
При первом запуске:
- загружается образ PostgreSQL 17
- создаётся volume для хранения данных
- ожидается запуск БД
- автоматически применяются миграции
- запускается Gunicorn

#### 5. Создание суперпользователя

В отдельном терминале:
```
docker compose exec web python manage.py createsuperuser
```
#### 6. Доступ к приложению

Приложение доступно по публичному IP-адресу сервера:
http://89.169.182.17:8000/admin/
http://89.169.182.17:8000/api/
http://89.169.182.17:8000/api/docs/swagger/

#### 7. Остановка контейнеров
Остановка:
```
docker compose down
```
Остановка с удалением volume базы данных:
```
docker compose down -v
```
#### 8. Структура Docker-конфигурации

В проекте используются:
- Dockerfile - сборка образа Django-приложения
- docker-compose.yml - оркестрация сервисов
- entrypoint.sh - ожидание запуска БД и применение миграций
- .dockerignore - исключение лишних файлов из образа
- .env.example - шаблон переменных окружения

#### 9. Как работает связка контейнеров

Используются два сервиса:

- db 
  - Образ: postgres:17 
  - Данные сохраняются в volume pg_data 
  - Доступен внутри docker-сети по имени db

- web 
  - Собирается из Dockerfile 
  - Запускается через Gunicorn 
  - Подключается к базе по адресу db:5432

#### 10. Безопасность (базовая)
- Подключение к серверу выполняется по SSH.
- Порт 8000 открыт для проверки приложения.
- В production рекомендуется:
  - использовать DEBUG=False 
  - настроить Nginx как reverse proxy 
  - использовать HTTPS

#### 11. CI/CD

Docker-конфигурация подготовлена для дальнейшей автоматизации деплоя через GitHub Actions.

Возможный сценарий:
- push в ветку develop
- сборка Docker-образа
- запуск контейнеров на сервере через SSH

### Итог

Контейнеризация позволяет:
- быстро развернуть проект одной командой
- изолировать окружение
- использовать одинаковую конфигурацию локально и на сервере
- упростить дальнейшую автоматизацию деплоя